{"version":3,"file":"bundle.js","sources":["../src/utils.js","../src/createBtnDom.js","../src/index.js"],"sourcesContent":["export const setDomDisplay = (dom, value) => {\n  dom.style.display = value\n}\n\nexport const setuuid = () => {\n  return new Date().getTime()\n}\n\nexport const setTextSelected = (className, text, id, styles, type) => {\n  const span = document.createElement('span')\n  span.className = className\n  span.id = id\n  span.innerHTML = text\n  Object.keys(styles).forEach(key => {\n    span.style[key] = styles[key]\n  })\n  if(type){\n    return span\n  }\n  const div = document.createElement('div')\n  div.appendChild(span)\n  return div.innerHTML\n}\n\nexport const getUserAgent = () => {\n  const u = navigator.userAgent\n  const isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1\n  const isiOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)\n  const eventName = {\n    mousedown: isAndroid || isiOS ? 'touchstart' : 'mousedown',\n    mouseup: isAndroid || isiOS ? 'touchend' : 'mouseup',\n    mousemove: isAndroid || isiOS ? 'touchmove' : 'mousemove',\n  }\n  return {\n    isAndroid,\n    isiOS,\n    eventName\n  }\n}\n\nexport const setDomMap = (dom, arr = []) => {\n  if (dom.parentNode) {\n    for (let i = 0; i < dom.parentNode.childNodes.length; i++) {\n      if (dom.parentNode.childNodes[i] === dom) {\n        arr.push(i)\n        if (dom.parentNode !== document.body) {\n          setDomMap(dom.parentNode, arr)\n        }\n      }\n    }\n  }\n  return arr\n}\n\nexport const getDom = (deeps, childIndex) => {\n  let dom = document.body\n  deeps.forEach(domIndex => {\n    for (let i = 0; i < dom.childNodes.length; i++) {\n      if (i === domIndex) {\n        dom = dom.childNodes[i]\n      }\n    }\n  })\n  return dom.childNodes[childIndex]\n}","import {getUserAgent} from './utils'\n\n\nconst createBtnDom = (textMarker, styles) => {\n    const defaultStyles = {\n      position: 'fixed',\n      textAlign: 'center',\n      width: '80%',\n      left: '10%',\n      height: '35px',\n      lineHeight: '35px',\n      backgroundColor: 'black',\n      borderRadius: 3,\n      display: 'none',\n      color: '#fff',\n      ...styles\n    }\n    const btnBox = document.createElement('div')\n\n    btnBox.id = 'webMarkerBtnBox'\n    Object.keys(defaultStyles).forEach(key => {\n      btnBox.style[key] = defaultStyles[key]\n    })\n\n    btnBox.innerHTML = `\n      <div style=\"flex: 1\" id=\"webMarker_btn_mark\">标记</div>\n      <div style=\"flex: 1\" id=\"webMarker_btn_delete\">删除当前标记</div>\n      <div style=\"flex: 1\" id=\"webMarker_btn_cancel\">取消</div>\n    `\n    document.body.appendChild(btnBox)\n    textMarker.btn_Box = document.getElementById('webMarkerBtnBox')\n    textMarker.btn_mark = document.getElementById('webMarker_btn_mark')\n    textMarker.btn_cancel = document.getElementById('webMarker_btn_cancel')\n    textMarker.btn_delete = document.getElementById('webMarker_btn_delete')\n\n    textMarker.btn_mark.addEventListener(getUserAgent().eventName.mousedown, textMarker.mark.bind(textMarker))\n    textMarker.btn_cancel.addEventListener('click', textMarker.hide.bind(textMarker))\n    textMarker.btn_delete.addEventListener('click', textMarker.del.bind(textMarker))\n  \n  }\n\n  export default createBtnDom","import {\n  setDomDisplay,\n  setuuid,\n  setTextSelected,\n  getUserAgent,\n  setDomMap,\n  getDom\n} from './utils'\nimport createBtnDom from './createBtnDom.js'\n\n/**\n * @param options 包含如下参数\n * @param defaultMarkers: 初始标记数据\n * @param markedStyles: 标记文本样式\n * @param btnStyles: 操作框样式\n * @param onSave: 标记后回调, 必填\n */\n\nclass textMarker {\n  constructor(options) {\n\n    if (!options || !options.onSave) {\n      throw new Error('options中的 onSave 选项为必填')\n    }\n\n    if (typeof options.onSave !== 'function') {\n      throw new Error('onSave 必须为一个函数')\n    }\n\n    this.MAKRED_CLASSNAME = 'web_marker_selected'\n\n\n    // 标记样式\n    this.markedStyles = {\n      color: '#fff',\n      backgroundColor: 'cadetblue',\n      ...options.markedStyles\n    }\n\n    // 回调\n    this.onSave = options.onSave\n\n    // 所有标记文本, 最后转换成json字符串保存到数据库\n    this.selectedMarkers = []\n\n    // 当前操作dom, 目前只能是一个\n    this.selectedDom = null\n\n    // 选中文本对象, 从 window.getSelection() 中拿\n    this.selectedText = {}\n\n    // 当前选中的节点, 多个节点不处理\n    this.currentSelectedDom = []\n\n    // 操作框显示位置\n    this.pageY = 0\n\n    // 临时保存标记信息, 鼠标抬起时设置, 解决点击\"标记\"按钮时 window.getSelection 影响 this.selectedText 的问题\n    this.tempMarkerInfo = {}\n\n    // 要删除的标记 id\n    this.deleteId = ''\n\n    // 是否已标记\n    this.isMarked = false\n\n    // 获取浏览器环境\n    this.userAgent = getUserAgent()\n\n    // 当数据库有标记数据时, 设置标记状态\n    if (Array.isArray(options.defaultMarkers) && options.defaultMarkers.length > 0) {\n      this.setDefaultMarkers(options.defaultMarkers)\n    }\n\n    // 创建按钮节点\n    createBtnDom(this, options.btnStyles)\n    // 监听事件\n    document.addEventListener('selectionchange', this.handleSelectionChange.bind(this))\n    document.addEventListener(this.userAgent.eventName.mousedown, this.handleMouseDown.bind(this))\n    document.addEventListener(this.userAgent.eventName.mousemove, this.handleMouseMove.bind(this))\n    document.addEventListener(this.userAgent.eventName.mouseup, this.handleMouseUp.bind(this))\n  }\n\n  // 选中文本事件\n  handleSelectionChange() {\n    if (window.getSelection()) {\n      this.selectedText = window.getSelection()\n    } else {\n      return\n    }\n  }\n\n  // 鼠标按下\n  handleMouseDown(e) {\n    const target = e.target\n    // 当选中的文本已经标记时的处理, 隐藏 \"标记\" 按钮, 显示 \"删除\" 按钮\n    if (target.className === this.MAKRED_CLASSNAME) {\n      this.pageY = e.pageY\n      setDomDisplay(this.btn_mark, 'none')\n      setDomDisplay(this.btn_delete, 'block')\n      this.deleteId = e.target.id\n      this.show()\n      this.isMarked = true\n      return\n    }\n    this.isMarked = false\n    this.currentSelectedDom = []\n    this.selectedDom = target\n    this.currentSelectedDom.push(target)\n  }\n\n  // 鼠标移动事件\n  handleMouseMove(e) {\n    if (!this.currentSelectedDom.includes(e.target)) {\n      this.currentSelectedDom.push(e.target)\n    }\n  }\n\n  // 鼠标抬起事件\n  handleMouseUp(e) {\n\n    if(this.isMarked){\n      return\n    }\n\n    if (this.selectedText.toString().length === 0 || !this.selectedText.getRangeAt) {\n      this.hide()\n      return\n    }\n\n    const {commonAncestorContainer} = this.selectedText.getRangeAt(0)\n    if(commonAncestorContainer.nodeType !== 3){\n      return\n    }\n\n    // 遇到以下节点时不处理, 可按需要添加\n    const disabledElement = ['BUTTON', 'H1', 'H2', 'IMG']\n    if (disabledElement.includes(commonAncestorContainer.parentNode.nodeName)) {\n      return\n    }\n\n    // 选中多个节点时不处理, 这种只能鼠标划过的有效果, 所以得用别的方法处理\n    if (this.currentSelectedDom.length > 1) {\n      return\n    }\n\n    setDomDisplay(this.btn_mark, 'block')\n    setDomDisplay(this.btn_delete, 'none')\n\n    const {\n      anchorOffset,\n      focusOffset\n    } = this.selectedText\n\n    this.pageY = e.pageY\n    let childIndex = 0\n    for (let i = 0; i < this.selectedDom.childNodes.length; i++) {\n      if (this.selectedDom.childNodes[i] === this.selectedText.anchorNode) {\n        childIndex = i\n      }\n    }\n    const domDeeps = setDomMap(this.selectedDom, []).reverse()\n    const startIndex = Math.min(anchorOffset, focusOffset)\n    const endIndex = Math.max(anchorOffset, focusOffset)\n    this.tempMarkerInfo = {\n      id: setuuid(),\n      domDeeps,\n      childIndex,\n      startIndex,\n      endIndex\n    }\n\n    // 选择内容包含已标记处理\n    let hasMultipleElement = false\n    this.selectedMarkers.forEach(item => {\n      if (JSON.stringify(item.domDeeps) === JSON.stringify(domDeeps)) {\n        if(startIndex < item.startIndex && endIndex > item.endIndex){\n          hasMultipleElement = true\n        }\n      }\n    })\n    console.log(hasMultipleElement)\n    if(hasMultipleElement) return\n    this.show()\n\n  }\n\n  hide() {\n    setDomDisplay(this.btn_Box, 'none')\n  }\n\n  show() {\n    setDomDisplay(this.btn_Box, 'flex')\n    this.btn_Box.style.top = this.pageY + 20 + 'px'\n  }\n\n  mark(e) {\n    e.preventDefault()\n    e.stopPropagation()\n    const text = this.selectedText.toString()\n    const rang = this.selectedText.getRangeAt(0)\n    const span = setTextSelected(this.MAKRED_CLASSNAME, text, this.tempMarkerInfo.id, this.markedStyles, 1)\n    rang.surroundContents(span);\n    this.selectedMarkers.push(this.tempMarkerInfo)\n    this.selectedText.removeAllRanges()\n    this.hide()\n    this.save()\n  }\n\n  save() {\n    const markersJson = JSON.stringify(this.selectedMarkers)\n    const userAgent = getUserAgent()\n\n    if (userAgent.isAndroid) {\n      // window.jsObject...\n    }\n\n    if (userAgent.isiOS) {\n      // window.webkit.jsObject.callBack.postMessage(this.selectedMarkers)\n    }\n\n    if (this.onSave) {\n      this.onSave(markersJson)\n    }\n  }\n\n  del() {\n    this.selectedMarkers.forEach((marker, index) => {\n      const dom = document.getElementById(this.deleteId)\n      const parentNode = dom.parentNode\n\n      if (marker.id.toString() === this.deleteId) {\n        const text = dom.innerText\n        const replaceTextNode = document.createTextNode(text)\n        parentNode.replaceChild(replaceTextNode, dom)\n\n        // 当删除parentNode节点的前面的标记时, 修正后面标记相关参数\n        // 删除一个标记, 需要把前后的两个节点(如果为文本节点的话)合并为一个节点\n\n        const {\n          domDeeps,\n          childIndex,\n          endIndex\n        } = marker\n        const preDom = replaceTextNode.previousSibling\n        const nextDom = replaceTextNode.nextSibling\n        if (preDom.nodeType === 3) {\n          preDom.textContent = preDom.textContent + text\n          parentNode.removeChild(replaceTextNode)\n          if (nextDom.nodeType === 3) {\n            preDom.textContent = preDom.textContent + nextDom.textContent\n            parentNode.removeChild(nextDom)\n          }\n        } else {\n          if (nextDom.nodeType === 3) {\n            replaceTextNode.textContent = replaceTextNode.textContent + nextDom.textContent\n            parentNode.removeChild(nextDom)\n          }\n        }\n\n\n        this.selectedMarkers.forEach(item => {\n          if (JSON.stringify(item.domDeeps) === JSON.stringify(domDeeps) && item.childIndex > childIndex) {\n            item.childIndex = item.childIndex - 2\n            item.startIndex = item.startIndex + endIndex\n            item.endIndex = item.endIndex + endIndex\n          }\n        })\n\n        this.selectedMarkers.splice(index, 1)\n        this.save()\n      }\n    })\n  }\n\n  setDefaultMarkers(defaultMarkers) {\n    this.selectedMarkers = defaultMarkers\n    defaultMarkers.forEach(marker => {\n      const textNode = getDom(marker.domDeeps, marker.childIndex)\n      if (!textNode) return\n      const html = textNode.textContent\n      const startHtml = html.substr(0, marker.startIndex)\n      const replaceHtml = html.substr(marker.startIndex, marker.endIndex - marker.startIndex)\n      const endHtml = html.substr(marker.endIndex)\n      textNode.textContent =\n        `${startHtml}${setTextSelected(this.MAKRED_CLASSNAME, replaceHtml, marker.id, this.markedStyles)}${endHtml}`\n      const parentNode = textNode.parentNode\n      let parentHtml = parentNode.innerHTML\n      parentHtml = parentHtml.replace(/&lt;/g, '<').replace(/&gt;/g, '>')\n      parentNode.innerHTML = parentHtml\n    })\n  }\n}\n\nwindow.webMarker = textMarker"],"names":[],"mappings":";;;;;EAAO,MAAM,aAAa,GAAG,CAAC,GAAG,EAAE,KAAK,KAAK;EAC7C,EAAE,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,MAAK;EAC3B,EAAC;AACD;EACO,MAAM,OAAO,GAAG,MAAM;EAC7B,EAAE,OAAO,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE;EAC7B,EAAC;AACD;EACO,MAAM,eAAe,GAAG,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,KAAK;EACtE,EAAE,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,EAAC;EAC7C,EAAE,IAAI,CAAC,SAAS,GAAG,UAAS;EAC5B,EAAE,IAAI,CAAC,EAAE,GAAG,GAAE;EACd,EAAE,IAAI,CAAC,SAAS,GAAG,KAAI;EACvB,EAAE,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI;EACrC,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,EAAC;EACjC,GAAG,EAAC;EACJ,EAAE,GAAG,IAAI,CAAC;EACV,IAAI,OAAO,IAAI;EACf,GAAG;EACH,EAAE,MAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAC;EAC3C,EAAE,GAAG,CAAC,WAAW,CAAC,IAAI,EAAC;EACvB,EAAE,OAAO,GAAG,CAAC,SAAS;EACtB,EAAC;AACD;EACO,MAAM,YAAY,GAAG,MAAM;EAClC,EAAE,MAAM,CAAC,GAAG,SAAS,CAAC,UAAS;EAC/B,EAAE,MAAM,SAAS,GAAG,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,EAAC;EACtE,EAAE,MAAM,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,+BAA+B,EAAC;EAC1D,EAAE,MAAM,SAAS,GAAG;EACpB,IAAI,SAAS,EAAE,SAAS,IAAI,KAAK,GAAG,YAAY,GAAG,WAAW;EAC9D,IAAI,OAAO,EAAE,SAAS,IAAI,KAAK,GAAG,UAAU,GAAG,SAAS;EACxD,IAAI,SAAS,EAAE,SAAS,IAAI,KAAK,GAAG,WAAW,GAAG,WAAW;EAC7D,IAAG;EACH,EAAE,OAAO;EACT,IAAI,SAAS;EACb,IAAI,KAAK;EACT,IAAI,SAAS;EACb,GAAG;EACH,EAAC;AACD;EACO,MAAM,SAAS,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,EAAE,KAAK;EAC5C,EAAE,IAAI,GAAG,CAAC,UAAU,EAAE;EACtB,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EAC/D,MAAM,IAAI,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;EAChD,QAAQ,GAAG,CAAC,IAAI,CAAC,CAAC,EAAC;EACnB,QAAQ,IAAI,GAAG,CAAC,UAAU,KAAK,QAAQ,CAAC,IAAI,EAAE;EAC9C,UAAU,SAAS,CAAC,GAAG,CAAC,UAAU,EAAE,GAAG,EAAC;EACxC,SAAS;EACT,OAAO;EACP,KAAK;EACL,GAAG;EACH,EAAE,OAAO,GAAG;EACZ,EAAC;AACD;EACO,MAAM,MAAM,GAAG,CAAC,KAAK,EAAE,UAAU,KAAK;EAC7C,EAAE,IAAI,GAAG,GAAG,QAAQ,CAAC,KAAI;EACzB,EAAE,KAAK,CAAC,OAAO,CAAC,QAAQ,IAAI;EAC5B,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EACpD,MAAM,IAAI,CAAC,KAAK,QAAQ,EAAE;EAC1B,QAAQ,GAAG,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,EAAC;EAC/B,OAAO;EACP,KAAK;EACL,GAAG,EAAC;EACJ,EAAE,OAAO,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC;EACnC;;EC7DA,MAAM,YAAY,GAAG,CAAC,UAAU,EAAE,MAAM,KAAK;EAC7C,IAAI,MAAM,aAAa,GAAG;EAC1B,MAAM,QAAQ,EAAE,OAAO;EACvB,MAAM,SAAS,EAAE,QAAQ;EACzB,MAAM,KAAK,EAAE,KAAK;EAClB,MAAM,IAAI,EAAE,KAAK;EACjB,MAAM,MAAM,EAAE,MAAM;EACpB,MAAM,UAAU,EAAE,MAAM;EACxB,MAAM,eAAe,EAAE,OAAO;EAC9B,MAAM,YAAY,EAAE,CAAC;EACrB,MAAM,OAAO,EAAE,MAAM;EACrB,MAAM,KAAK,EAAE,MAAM;EACnB,MAAM,GAAG,MAAM;EACf,MAAK;EACL,IAAI,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAC;AAChD;EACA,IAAI,MAAM,CAAC,EAAE,GAAG,kBAAiB;EACjC,IAAI,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI;EAC9C,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,aAAa,CAAC,GAAG,EAAC;EAC5C,KAAK,EAAC;AACN;EACA,IAAI,MAAM,CAAC,SAAS,GAAG,CAAC;AACxB;AACA;AACA;AACA,IAAI,EAAC;EACL,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAC;EACrC,IAAI,UAAU,CAAC,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,iBAAiB,EAAC;EACnE,IAAI,UAAU,CAAC,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,oBAAoB,EAAC;EACvE,IAAI,UAAU,CAAC,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,sBAAsB,EAAC;EAC3E,IAAI,UAAU,CAAC,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,sBAAsB,EAAC;AAC3E;EACA,IAAI,UAAU,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,SAAS,CAAC,SAAS,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAC;EAC9G,IAAI,UAAU,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAC;EACrF,IAAI,UAAU,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,EAAC;EACpF;EACA;;EC7BA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;EACA,MAAM,UAAU,CAAC;EACjB,EAAE,WAAW,CAAC,OAAO,EAAE;AACvB;EACA,IAAI,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;EACrC,MAAM,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC;EAC/C,KAAK;AACL;EACA,IAAI,IAAI,OAAO,OAAO,CAAC,MAAM,KAAK,UAAU,EAAE;EAC9C,MAAM,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC;EACvC,KAAK;AACL;EACA,IAAI,IAAI,CAAC,gBAAgB,GAAG,sBAAqB;AACjD;AACA;EACA;EACA,IAAI,IAAI,CAAC,YAAY,GAAG;EACxB,MAAM,KAAK,EAAE,MAAM;EACnB,MAAM,eAAe,EAAE,WAAW;EAClC,MAAM,GAAG,OAAO,CAAC,YAAY;EAC7B,MAAK;AACL;EACA;EACA,IAAI,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,OAAM;AAChC;EACA;EACA,IAAI,IAAI,CAAC,eAAe,GAAG,GAAE;AAC7B;EACA;EACA,IAAI,IAAI,CAAC,WAAW,GAAG,KAAI;AAC3B;EACA;EACA,IAAI,IAAI,CAAC,YAAY,GAAG,GAAE;AAC1B;EACA;EACA,IAAI,IAAI,CAAC,kBAAkB,GAAG,GAAE;AAChC;EACA;EACA,IAAI,IAAI,CAAC,KAAK,GAAG,EAAC;AAClB;EACA;EACA,IAAI,IAAI,CAAC,cAAc,GAAG,GAAE;AAC5B;EACA;EACA,IAAI,IAAI,CAAC,QAAQ,GAAG,GAAE;AACtB;EACA;EACA,IAAI,IAAI,CAAC,QAAQ,GAAG,MAAK;AACzB;EACA;EACA,IAAI,IAAI,CAAC,SAAS,GAAG,YAAY,GAAE;AACnC;EACA;EACA,IAAI,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,OAAO,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;EACpF,MAAM,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,cAAc,EAAC;EACpD,KAAK;AACL;EACA;EACA,IAAI,YAAY,CAAC,IAAI,EAAE,OAAO,CAAC,SAAS,EAAC;EACzC;EACA,IAAI,QAAQ,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;EACvF,IAAI,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;EAClG,IAAI,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;EAClG,IAAI,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;EAC9F,GAAG;AACH;EACA;EACA,EAAE,qBAAqB,GAAG;EAC1B,IAAI,IAAI,MAAM,CAAC,YAAY,EAAE,EAAE;EAC/B,MAAM,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,YAAY,GAAE;EAC/C,KAAK,MAAM;EACX,MAAM,MAAM;EACZ,KAAK;EACL,GAAG;AACH;EACA;EACA,EAAE,eAAe,CAAC,CAAC,EAAE;EACrB,IAAI,MAAM,MAAM,GAAG,CAAC,CAAC,OAAM;EAC3B;EACA,IAAI,IAAI,MAAM,CAAC,SAAS,KAAK,IAAI,CAAC,gBAAgB,EAAE;EACpD,MAAM,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,MAAK;EAC1B,MAAM,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAC;EAC1C,MAAM,aAAa,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,EAAC;EAC7C,MAAM,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,GAAE;EACjC,MAAM,IAAI,CAAC,IAAI,GAAE;EACjB,MAAM,IAAI,CAAC,QAAQ,GAAG,KAAI;EAC1B,MAAM,MAAM;EACZ,KAAK;EACL,IAAI,IAAI,CAAC,QAAQ,GAAG,MAAK;EACzB,IAAI,IAAI,CAAC,kBAAkB,GAAG,GAAE;EAChC,IAAI,IAAI,CAAC,WAAW,GAAG,OAAM;EAC7B,IAAI,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,EAAC;EACxC,GAAG;AACH;EACA;EACA,EAAE,eAAe,CAAC,CAAC,EAAE;EACrB,IAAI,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE;EACrD,MAAM,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,EAAC;EAC5C,KAAK;EACL,GAAG;AACH;EACA;EACA,EAAE,aAAa,CAAC,CAAC,EAAE;AACnB;EACA,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;EACrB,MAAM,MAAM;EACZ,KAAK;AACL;EACA,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;EACpF,MAAM,IAAI,CAAC,IAAI,GAAE;EACjB,MAAM,MAAM;EACZ,KAAK;AACL;EACA,IAAI,MAAM,CAAC,uBAAuB,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,EAAC;EACrE,IAAI,GAAG,uBAAuB,CAAC,QAAQ,KAAK,CAAC,CAAC;EAC9C,MAAM,MAAM;EACZ,KAAK;AACL;EACA;EACA,IAAI,MAAM,eAAe,GAAG,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAC;EACzD,IAAI,IAAI,eAAe,CAAC,QAAQ,CAAC,uBAAuB,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;EAC/E,MAAM,MAAM;EACZ,KAAK;AACL;EACA;EACA,IAAI,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;EAC5C,MAAM,MAAM;EACZ,KAAK;AACL;EACA,IAAI,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAC;EACzC,IAAI,aAAa,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,EAAC;AAC1C;EACA,IAAI,MAAM;EACV,MAAM,YAAY;EAClB,MAAM,WAAW;EACjB,KAAK,GAAG,IAAI,CAAC,aAAY;AACzB;EACA,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,MAAK;EACxB,IAAI,IAAI,UAAU,GAAG,EAAC;EACtB,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EACjE,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE;EAC3E,QAAQ,UAAU,GAAG,EAAC;EACtB,OAAO;EACP,KAAK;EACL,IAAI,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,OAAO,GAAE;EAC9D,IAAI,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,WAAW,EAAC;EAC1D,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,WAAW,EAAC;EACxD,IAAI,IAAI,CAAC,cAAc,GAAG;EAC1B,MAAM,EAAE,EAAE,OAAO,EAAE;EACnB,MAAM,QAAQ;EACd,MAAM,UAAU;EAChB,MAAM,UAAU;EAChB,MAAM,QAAQ;EACd,MAAK;AACL;EACA;EACA,IAAI,IAAI,kBAAkB,GAAG,MAAK;EAClC,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,IAAI;EACzC,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE;EACtE,QAAQ,GAAG,UAAU,GAAG,IAAI,CAAC,UAAU,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;EACpE,UAAU,kBAAkB,GAAG,KAAI;EACnC,SAAS;EACT,OAAO;EACP,KAAK,EAAC;EACN,IAAI,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAC;EACnC,IAAI,GAAG,kBAAkB,EAAE,MAAM;EACjC,IAAI,IAAI,CAAC,IAAI,GAAE;AACf;EACA,GAAG;AACH;EACA,EAAE,IAAI,GAAG;EACT,IAAI,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,EAAC;EACvC,GAAG;AACH;EACA,EAAE,IAAI,GAAG;EACT,IAAI,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,EAAC;EACvC,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,EAAE,GAAG,KAAI;EACnD,GAAG;AACH;EACA,EAAE,IAAI,CAAC,CAAC,EAAE;EACV,IAAI,CAAC,CAAC,cAAc,GAAE;EACtB,IAAI,CAAC,CAAC,eAAe,GAAE;EACvB,IAAI,MAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAE;EAC7C,IAAI,MAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,EAAC;EAChD,IAAI,MAAM,IAAI,GAAG,eAAe,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,EAAE,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,EAAC;EAC3G,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;EAChC,IAAI,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAC;EAClD,IAAI,IAAI,CAAC,YAAY,CAAC,eAAe,GAAE;EACvC,IAAI,IAAI,CAAC,IAAI,GAAE;EACf,IAAI,IAAI,CAAC,IAAI,GAAE;EACf,GAAG;AACH;EACA,EAAE,IAAI,GAAG;EACT,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,EAAC;EAC5D,IAAI,MAAM,SAAS,GAAG,YAAY,GAAE;AASpC;EACA,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;EACrB,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,EAAC;EAC9B,KAAK;EACL,GAAG;AACH;EACA,EAAE,GAAG,GAAG;EACR,IAAI,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,KAAK,KAAK;EACpD,MAAM,MAAM,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,EAAC;EACxD,MAAM,MAAM,UAAU,GAAG,GAAG,CAAC,WAAU;AACvC;EACA,MAAM,IAAI,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,QAAQ,EAAE;EAClD,QAAQ,MAAM,IAAI,GAAG,GAAG,CAAC,UAAS;EAClC,QAAQ,MAAM,eAAe,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,EAAC;EAC7D,QAAQ,UAAU,CAAC,YAAY,CAAC,eAAe,EAAE,GAAG,EAAC;AACrD;EACA;EACA;AACA;EACA,QAAQ,MAAM;EACd,UAAU,QAAQ;EAClB,UAAU,UAAU;EACpB,UAAU,QAAQ;EAClB,SAAS,GAAG,OAAM;EAClB,QAAQ,MAAM,MAAM,GAAG,eAAe,CAAC,gBAAe;EACtD,QAAQ,MAAM,OAAO,GAAG,eAAe,CAAC,YAAW;EACnD,QAAQ,IAAI,MAAM,CAAC,QAAQ,KAAK,CAAC,EAAE;EACnC,UAAU,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,GAAG,KAAI;EACxD,UAAU,UAAU,CAAC,WAAW,CAAC,eAAe,EAAC;EACjD,UAAU,IAAI,OAAO,CAAC,QAAQ,KAAK,CAAC,EAAE;EACtC,YAAY,MAAM,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,GAAG,OAAO,CAAC,YAAW;EACzE,YAAY,UAAU,CAAC,WAAW,CAAC,OAAO,EAAC;EAC3C,WAAW;EACX,SAAS,MAAM;EACf,UAAU,IAAI,OAAO,CAAC,QAAQ,KAAK,CAAC,EAAE;EACtC,YAAY,eAAe,CAAC,WAAW,GAAG,eAAe,CAAC,WAAW,GAAG,OAAO,CAAC,YAAW;EAC3F,YAAY,UAAU,CAAC,WAAW,CAAC,OAAO,EAAC;EAC3C,WAAW;EACX,SAAS;AACT;AACA;EACA,QAAQ,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,IAAI;EAC7C,UAAU,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,UAAU,GAAG,UAAU,EAAE;EAC1G,YAAY,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,EAAC;EACjD,YAAY,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,SAAQ;EACxD,YAAY,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,SAAQ;EACpD,WAAW;EACX,SAAS,EAAC;AACV;EACA,QAAQ,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAC;EAC7C,QAAQ,IAAI,CAAC,IAAI,GAAE;EACnB,OAAO;EACP,KAAK,EAAC;EACN,GAAG;AACH;EACA,EAAE,iBAAiB,CAAC,cAAc,EAAE;EACpC,IAAI,IAAI,CAAC,eAAe,GAAG,eAAc;EACzC,IAAI,cAAc,CAAC,OAAO,CAAC,MAAM,IAAI;EACrC,MAAM,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,UAAU,EAAC;EACjE,MAAM,IAAI,CAAC,QAAQ,EAAE,MAAM;EAC3B,MAAM,MAAM,IAAI,GAAG,QAAQ,CAAC,YAAW;EACvC,MAAM,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,UAAU,EAAC;EACzD,MAAM,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,UAAU,EAAC;EAC7F,MAAM,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAC;EAClD,MAAM,QAAQ,CAAC,WAAW;EAC1B,QAAQ,CAAC,EAAE,SAAS,CAAC,EAAE,eAAe,CAAC,IAAI,CAAC,gBAAgB,EAAE,WAAW,EAAE,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,OAAO,CAAC,EAAC;EACpH,MAAM,MAAM,UAAU,GAAG,QAAQ,CAAC,WAAU;EAC5C,MAAM,IAAI,UAAU,GAAG,UAAU,CAAC,UAAS;EAC3C,MAAM,UAAU,GAAG,UAAU,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,EAAC;EACzE,MAAM,UAAU,CAAC,SAAS,GAAG,WAAU;EACvC,KAAK,EAAC;EACN,GAAG;EACH,CAAC;AACD;EACA,MAAM,CAAC,SAAS,GAAG;;;;"}