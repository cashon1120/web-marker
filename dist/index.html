<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>web-marker</title>
	<style>
		body {
			padding-bottom: 100px;
		}

		#info {
			position: fixed;
			width: 100%;
			bottom: 0;
			left: 0;
			background-color: #f1f1f1;
			padding: 10px;
			font-size: 12px;
			border-top: 1px solid #eee;
		}

		#selectionText {
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.test {
			margin-bottom: 30px;
		}
	</style>
</head>

<body>
	<div id="windowobject"></div>
	<h1>这里是标题</h1>
	疫情未疫情未疫情未疫情未疫情未
	<div class="test">导致疫情二次暴发。美国国会预算办公室1日发布的数据显示，即使所有救助资金都得以用来缓解新冠疫情影响,<br /><br /><br />疫情未疫情未疫情未疫情未疫情未
		<p>
			9万亿美元。意大利累计确诊233515例大型示威活动引发对疫情复燃的担忧根据意大利民事保护部门公布的数据，截至当地时间6月2日18时，意大利新增新冠肺炎确诊病例318例，累计确诊233515例，新增死亡病例55例，累计死亡33530例
			9万亿美元。意大利累计确诊233515例大型示威活动引发对疫情复燃的担忧根据意大利民事保护部门公布的数据，截至当地时间6月2日18时，意大利新增新冠肺炎确诊病例318例，累计确诊233515例，新增死亡病例55例，累计死亡33530例
			9万亿美元。意大利累计确诊233515例大型示威活动引发对疫情复燃的担忧根据意大利民事保护部门公布的数据，截至当地时间6月2日18时，意大利新增新冠肺炎确诊病例318例，累计确诊233515例，新增死亡病例55例，累计死亡33530例
			9万亿美元。意大利累计确诊233515例大型示威活动引发对疫情复燃的担忧根据意大利民事保护部门公布的数据，截至当地时间6月2日18时，意大利新增新冠肺炎确诊病例318例，累计确诊233515例，新增死亡病例55例，累计死亡33530例
			9万亿美元。意大利累计确诊233515例大型示威活动引发对疫情复燃的担忧根据意大利民事保护部门公布的数据，截至当地时间6月2日18时，意大利新增新冠肺炎确诊病例318例，累计确诊233515例，新增死亡病例55例，累计死亡33530例
			9万亿美元。意大利累计确诊233515例大型示威活动引发对疫情复燃的担忧根据意大利民事保护部门公布的数据，截至当地时间6月2日18时，意大利新增新冠肺炎确诊病例318例，累计确诊233515例，新增死亡病例55例，累计死亡33530例
		</p>
	</div>
	<div class="test">
		<div>5555555</div>
		<div>99999999999</div>
	</div>

	<span class="header-text">Put this in a headline</span>
	<button id="btn_clearData" class="test">清除所有数据</button>


</body>
<script src="./bundle.js"></script>
<script>
	window.addEventListener('load', () => {

		// 测试代码
		const btn_clearData = document.getElementById('btn_clearData')
		btn_clearData.addEventListener('click', () => {
			localStorage.removeItem('markers')
			location.reload()
		})
		// localStorage.removeItem('markers')




		// 获取已有数据
		let defaultMarkers = {}
		if (window.jsObject && window.jsObject.getCallBack) {
			defaultMarkers = JSON.parse(window.jsObject.getCallBack())
			document.getElementById('windowobject').innerHTML = JSON.parse(window.jsObject.getCallBack())
		} else {
		
			defaultMarkers = JSON.parse(localStorage.getItem('markers'))
			document.getElementById('windowobject').innerHTML = '没有 getCallBack 对象'
		}

		const myTextMarker = new window.WebTextMarker({
			defaultMarkers,
			debug: true,
			onSave: markers => {
				markersJson = JSON.stringify(markers)
				console.log(markersJson)
				if (myTextMarker.userAgent.isAndroid && window.jsObject) {
					window.jsObject.save(markersJson)
					return
				}

				if (myTextMarker.userAgent.isiOS) {
					// window.webkit.jsObject.callBack.postMessage(this.selectedMarkers)
					return
				}

				localStorage.setItem('markers', markersJson)
			}
		})
	})

</script>

</html>